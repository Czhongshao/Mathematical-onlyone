# B题 工序安排问题解题思路

## 问题背景

B题是关于成衣制造厂的工序安排问题。该厂有三条相同的服装生产流水线，每条流水线包含裁剪、缝制、水洗、熨烫、包装五道工序。工人根据熟练程度分为五级，不同级别的工人可以从事不同的工序，且有不同的工作效率和故障率。题目要求确定工人的分配方案和培训策略，使总利润最大化。

## B问题1：测算最优安排下不同工序的故障损失

**解题思路**：

| 符号      | 含义                                   | 单位         |
|-----------|----------------------------------------|--------------|
| $x_{ij}$  | 第 $i$ 级技工分配到第 $j$ 道工序的人数 | 人           |
| $y_i$     | 第 $i$ 级技工提升到 $i+1$ 级的人数     | 人           |
| $N_i$     | 第 $i$ 级技工现有人数                  | 人           |
| $R_j$     | 第 $j$ 道工序所需总人数                | 人           |
| $f_{ij}$  | 第 $i$ 级技工在第 $j$ 道工序的故障率   | 无量纲（%）   |
| $F_j$     | 第 $j$ 道工序的平均故障率              | 无量纲（%）   |
| $\lambda_j$ | 第 $j$ 道工序单位时间故障次数        | 次/小时      |
| $L_j$     | 第 $j$ 道工序单次故障损失              | 元/次        |
| $T$       | 总工作小时数                           | 小时         |
| $D_j$     | 第 $j$ 道工序的故障损失                | 元           |
| $D$       | 总故障损失                             | 元           |
| $e_{ij}$  | 第 $i$ 级技工在第 $j$ 道工序的效率     | 件/天        |
| $H$       | 每天工作小时数                         | 小时/天      |
| $S$       | 生产天数                               | 天           |
| $Q_j$     | 第 $j$ 道工序的产量                    | 件           |
| $Q$       | 总产量（由瓶颈工序决定）               | 件           |
| $p$       | 每件产品利润（固定为40）               | 元/件        |
| $c_i$     | 第 $i$ 级技工提升到 $i+1$ 级的培训费用 | 元/人        |
| $C$       | 总培训费用                             | 元           |
| $P$       | 总利润                                 | 元           |

1. **建立混合整数规划模型**：

   - **决策变量定义**：
     - $x_{ij}$：第 $i$ 级技工分配到第 $j$ 道工序的人数，$x_{ij} \in \mathbb{Z}_{\geq 0}$，$i=1,2,3,4,5$，$j=1,2,3,4,5$。
     - $y_i$：第 $i$ 级技工提升到 $i+1$ 级的人数，$y_i \in \mathbb{Z}_{\geq 0}$，$i=1,2,3,4$。

2. **约束条件**：

   - **人员总数约束**：
     $$
     \sum_{j=1}^{5} x_{ij} + y_i \leq N_i, \quad \forall i=1,2,3,4
     $$
     $$
     \sum_{j=1}^{5} x_{5j} \leq N_5 + y_4
     $$

   - **工序需求约束**：
     $$
     \sum_{i=1}^{5} x_{ij} \geq R_j, \quad \forall j=1,2,3,4,5
     $$

   - **技能匹配约束**：
     若第 $i$ 级技工不能从事第 $j$ 道工序，则强制 $x_{ij} = 0$。

   - **培训人数约束**：
     $$
     0 \leq y_i \leq N_i, \quad y_i \in \mathbb{Z}, \quad \forall i=1,2,3,4
     $$

3. **目标函数**：

   - **最大化总利润**：
     $$
     \max \left\{ P = Q \cdot p - D - C \right\}
     $$
     其中：
     - $Q$：总产量（由产能瓶颈工序决定，见下式）
     - $p$：每件产品利润
     - $D$：总故障损失
     - $C$：总培训费用

   - **总产量 $Q$ 的计算**：
     $$
     Q_j = \sum_{i=1}^{5} x_{ij} \cdot e_{ij} \cdot S, \quad Q = \min_{j=1,\ldots,5} Q_j
     $$

   - **故障损失 $D$ 的计算**：
     $$
     F_j = \frac{\sum_{i=1}^{5} x_{ij} f_{ij}}{\sum_{i=1}^{5} x_{ij}}
     $$
     $$
     \lambda_j = F_j \times \sum_{i=1}^{5} x_{ij}
     $$
     $$
     D_j = \lambda_j \times T \times L_j
     $$
     $$
     D = \sum_{j=1}^{5} D_j
     $$

   - **培训费用 $C$ 的计算**：
     $$
     C = \sum_{i=1}^{4} y_i \cdot c_i
     $$

4. **敏感性分析**：

   - 对模型中的关键参数（如 $F_j$、$L_j$、$e_{ij}$、$c_i$ 等）进行扰动，分析其对目标函数 $P$ 的影响。
   - 计算各参数对 $P$ 的偏导数，确定敏感性最大的工序或参数。

## B问题2：测算4周总利润及敏感性分析

**解题思路**：

1. **时间维度扩展**：
   - 将问题1的模型扩展到4周时间维度
   - 考虑培训时间对生产的影响

2. **产能计算**：
   - 每条流水线的产能由瓶颈工序决定
   - 计算每道工序的实际产能 = 工人数量 × 单位时间工作效率

3. **利润计算**：
   - 4周总产量 = 最小工序产能 × 工作时间
   - 总利润 = 总产量 × 单件利润 - 故障损失 - 培训费用

4. **敏感性分析**：
   - 对每道工序进行扰动分析，如增减人员、改变故障率等
   - 计算各工序参数变化对总利润的影响程度
   - 确定最敏感的工序，即参数变化导致利润变化最大的工序

5. **可视化分析**：
   - 绘制各工序参数与总利润的关系图
   - 直观展示敏感性分析结果

## B问题3：24周生产计划安排

**解题思路**：

1. **轮换策略设计**：
   - 设计工人轮换方案，确保每4周后工人更换工种
   - 考虑技能匹配约束，工人只能轮换到其技能允许的工序

2. **周期性规划模型**：
   - 将24周划分为6个4周周期
   - 为每个周期制定最优工人分配方案
   - 确保相邻周期之间工人工种发生变化

3. **培训策略优化**：
   - 分析长期培训投资回报
   - 确定最优培训时机和培训对象

4. **连续性约束**：
   - 考虑工人轮换对生产连续性的影响
   - 设计平滑过渡策略，减少工人轮换带来的生产波动

5. **长期利润最大化**：
   - 目标函数：最大化24周总利润
   - 平衡短期利润与长期稳定性

## 综合考虑

在解决这三个问题时，需要注意以下几点：

1. **整体最优与局部最优**：
   - 考虑整个生产系统的协同效应，而非单独优化每道工序

2. **培训投资回报分析**：
   - 分析培训费用与提升效率之间的权衡
   - 考虑培训时间对短期产能的影响与长期收益的平衡

3. **故障影响的传递效应**：
   - 分析一道工序故障对后续工序的连锁影响
   - 考虑故障修复时间对整体生产节奏的影响

4. **人员调配的灵活性**：
   - 考虑高级技工可以从事多种工序的灵活性优势
   - 分析如何利用这种灵活性应对生产波动

5. **模型求解方法**：
   - 可以使用线性规划、整数规划或启发式算法求解
   - 对于复杂的24周规划问题，可能需要分解为子问题或使用动态规划方法
